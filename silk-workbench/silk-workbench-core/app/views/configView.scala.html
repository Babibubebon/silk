@import com.typesafe.config.Config
@import scala.collection.JavaConversions._
@import com.typesafe.config.ConfigObject
@import com.typesafe.config.ConfigValue
@import com.typesafe.config.ConfigRenderOptions
@import controllers.core.routes.Assets

@(config: Config)(implicit session: play.api.mvc.Session)

@header = {
  <link rel="stylesheet" href="@Assets.at("libs/jstree/style.min.css")" type="text/css" />
  <script src="@Assets.at("libs/jstree/jstree.min.js")" type="text/javascript"></script>
  <script type="application/javascript" >
    $(function () {
      $('#configRoot').jstree({
        "core" : {
          "themes": {"stripes": true}
        },
        "plugins" : [
          "search", "state", "wholerow"
        ]
      });
    });
  </script>
}

@toolbar = {
}

@content = {
  <div id="configRoot">
    @render(config.root())
  </div>
}

@render(obj: ConfigObject) = {
  <ul>
  @for(entry <- obj.entrySet().toSeq.sortBy(_.getKey)) {
    <li>
      @entry.getKey
      @entry.getValue match {
        case childObj: ConfigObject => {
          @render(childObj)
        }
        case value => {
          @renderValue(value)
        }
      }
    </li>
  }
  </ul>
}

@renderValue(value: ConfigValue) = {
  <ul>
    <li>Value: @value.render(ConfigRenderOptions.defaults())</li>
    <li>Origin: @value.origin().filename()</li>
    <li>
      Comments: @value.origin().comments().mkString(", ")
    </li>
  </ul>
}

@main(None, "config")(header)(toolbar)(content)

